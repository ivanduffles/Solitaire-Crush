<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>Solitaire Crush Prototype</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="app">
      <header class="hud">
        <div class="topbar-left">
          <div class="hud__counts">
            <button class="hud__button hud__button--powerup" id="freeSwapButton" type="button" aria-label="Use free swap">
              <span class="hud__button-amount" aria-label="Free swaps remaining"><span id="freeSwapCount">3</span></span>
              <span class="hud__icon" aria-hidden="true">
                <svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" focusable="false">
                  <path d="M78.9102 44.3131L79.0127 44.5778C81.6134 45.3518 83.5008 47.751 83.501 50.6139V50.6149L83.498 60.4059C83.4976 69.298 76.2148 76.5807 67.3223 76.5807H37.7891L42.418 81.1676L42.4482 81.1979L42.4775 81.2291C44.7815 83.6748 44.8691 87.6638 42.3438 90.11L42.3447 90.111C42.3381 90.1177 42.3309 90.1238 42.3242 90.1305C42.3133 90.141 42.303 90.1523 42.292 90.1627L42.291 90.1617C41.0083 91.4193 39.3497 91.944 37.873 91.944C36.2583 91.9439 34.6757 91.3853 33.4053 90.1149L33.3984 90.1071L33.3916 90.1002L18.2793 74.736C15.7238 72.2477 15.9646 68.2264 18.2939 65.8971L33.4053 50.7848L33.4072 50.7828C35.8254 48.3698 39.604 48.2919 42.1064 50.5582L42.3447 50.7848L42.3467 50.7867C44.8372 53.2828 44.8398 57.2279 42.3447 59.7233L38.084 63.983L67.3223 63.986C69.3193 63.9858 70.9002 62.4034 70.9004 60.4078V50.6129C70.9005 47.1186 73.713 44.3131 77.2012 44.3131H78.9102ZM29.0537 49.2614C29.0536 52.7557 26.2411 55.5612 22.7529 55.5612C19.2587 55.561 16.4532 52.7494 16.4531 49.2614V39.5524C16.4531 30.6603 23.7325 23.3766 32.6289 23.3766H62.1172L57.6045 18.8639C55.1137 16.3678 55.1111 12.4228 57.6064 9.92737L57.6084 9.92542C60.0266 7.51241 63.8042 7.43451 66.3066 9.70081L66.5449 9.92737L81.7393 25.1246L81.96 25.3571C84.1713 27.806 84.0371 31.5504 81.7871 33.9283L81.7539 33.9635L66.6416 49.3278L66.6357 49.3326L66.6309 49.3385C65.36 50.6147 63.7707 51.1715 62.1592 51.1715C60.5444 51.1715 58.9619 50.6128 57.6914 49.3424C55.2032 46.8543 55.2008 42.9445 57.5586 40.4528L57.5977 40.4117L61.9932 35.9733H32.6289C30.6316 35.9733 29.0498 37.5565 29.0498 39.5524L29.0537 49.2604V49.2614Z" fill="black" stroke="white" stroke-width="5"/>
                </svg>
              </span>
            </button>
            <button class="hud__button hud__button--powerup" id="freeBombButton" type="button" aria-label="Use free bomb">
              <span class="hud__button-amount" aria-label="Free bombs remaining"><span id="freeBombCount">3</span></span>
              <span class="hud__icon" aria-hidden="true">
                <svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" focusable="false">
                  <g clip-path="url(#clip0_303_16867)">
                    <path d="M46.8265 16.3318C47.6466 14.4382 49.6988 13.2623 51.8285 13.7115L52.0421 13.7615L52.0424 13.7624C55.4685 14.6603 58.7593 15.9783 61.8429 17.6706C65.3177 13.685 69.4134 10.8174 73.8118 9.60961C78.9063 8.2107 84.1924 9.10854 88.9247 12.7009C89.9297 13.4638 90.5211 14.577 90.7189 15.6728C90.9173 16.7721 90.7591 18.1018 89.9158 19.2142L89.9148 19.2144C88.3133 21.3255 85.3437 21.4538 83.468 20.0309L83.2408 19.8583L83.0575 19.6385C83.083 19.6691 83.0022 19.5696 82.7078 19.3975C82.4342 19.2376 82.0565 19.0621 81.5878 18.8999C80.6452 18.5739 79.4734 18.3503 78.2851 18.3503C77.1987 18.3503 75.5184 18.841 73.6114 20.0262C72.297 20.8431 70.9677 21.934 69.766 23.2616C71.5571 24.8556 73.2224 26.6032 74.736 28.4944C76.0895 30.1857 75.9812 32.5267 74.6858 34.1139L74.6848 34.1142L71.0034 38.6219C72.5185 41.1785 73.7148 43.9795 74.5204 46.9859C79.2753 64.7311 68.744 82.9718 50.9988 87.7266C33.2537 92.4812 15.0138 81.9498 10.259 64.2047L10.0472 63.3728C5.8352 45.8932 16.3123 28.1458 33.78 23.4652C37.3751 22.5019 40.9943 22.1694 44.5184 22.3955L46.7485 16.5235L46.8265 16.3318Z" stroke="white" stroke-width="5"/>
                    <path d="M47.314 16.6746C47.9925 14.8866 49.8778 13.7636 51.8268 14.1753L52.0156 14.2198L52.8381 14.4443C61.3078 16.8469 68.8986 21.8491 74.446 28.7806C75.645 30.2791 75.5506 32.3576 74.3971 33.771L68.3963 41.1234L67.3194 42.4432L65.8439 41.589L65.8437 41.588C65.843 41.5876 65.8416 41.5876 65.8403 41.5869C65.8378 41.5854 65.8343 41.5826 65.8293 41.5797C65.819 41.5738 65.8032 41.5655 65.7829 41.5537C65.7424 41.5303 65.682 41.4956 65.6035 41.4502C65.4466 41.3593 65.2166 41.2257 64.9237 41.0561C64.3376 40.7166 63.5003 40.2311 62.4954 39.6493C60.4853 38.4856 57.8039 36.934 55.1214 35.3832C52.4388 33.8322 49.7556 32.2821 47.7394 31.1212C46.731 30.5406 45.8909 30.059 45.3023 29.7229C45.0074 29.5544 44.7789 29.4247 44.625 29.3382C44.5467 29.2942 44.4944 29.265 44.4645 29.2488C44.4474 29.2395 44.4503 29.2406 44.4631 29.2471C44.4673 29.2493 44.4961 29.2649 44.5364 29.2831C44.5523 29.2903 44.6091 29.3155 44.6847 29.3424C44.7274 29.357 44.8425 29.3914 44.9149 29.4091C45.054 29.4353 45.5357 29.4493 45.8711 29.3895L45.3515 27.4501L43.4933 26.7449L47.314 16.6746Z" fill="black" stroke="white" stroke-width="4"/>
                    <circle cx="42.4906" cy="55.568" r="32.764" transform="rotate(-15 42.4906 55.568)" fill="black" stroke="white" stroke-width="4"/>
                    <path d="M30.8079 41.296C31.7166 40.668 31.9441 39.4223 31.3161 38.5136C30.6882 37.6049 29.4424 37.3773 28.5338 38.0053L29.6708 39.6507L30.8079 41.296ZM29.6708 39.6507L28.5338 38.0053C18.95 44.6287 18.445 55.5251 21.1548 63.1237L23.0386 62.4519L24.9224 61.7801C22.5939 55.2507 23.2035 46.5513 30.8079 41.296L29.6708 39.6507Z" fill="white"/>
                    <path d="M23.6172 68.3409L26.9824 66.0526L28.6987 68.5766C29.3306 69.5058 29.0895 70.7714 28.1602 71.4033C27.2309 72.0352 25.9653 71.7942 25.3334 70.8649L23.6172 68.3409Z" fill="white"/>
                    <path d="M67.4432 18.806C72.1769 14.5842 80.62 11.804 86.3055 16.3921" stroke="black" stroke-width="4" stroke-linecap="round" stroke-dasharray="1 5"/>
                  </g>
                  <defs>
                    <clipPath id="clip0_303_16867">
                      <rect width="100" height="100" fill="white"/>
                    </clipPath>
                  </defs>
                </svg>
              </span>
            </button>
          </div>
        </div>
        <div class="topbar-center">
          <div class="hud__score">
            <span class="hud__label">Score</span>
            <span id="scoreValue">0</span>
          </div>
        </div>
        <div class="topbar-right">
          <button
            class="hud__button hud__menu-button"
            id="menuBtn"
            type="button"
            aria-haspopup="dialog"
            aria-controls="gameMenuModal"
            aria-label="Open game menu"
          >
            ☰
          </button>
        </div>
      </header>

      <section class="board-viewport" aria-label="Board viewport">
        <section class="board" id="board" aria-label="Game board"></section>
      </section>

      <footer class="status">
        <div id="statusMessage">Tap adjacent cards to swap. Tap again to deselect.</div>
        <button class="clear-button" id="clearSequenceButton" type="button" hidden>Clear</button>
      </footer>
    </main>

    <div class="menu-modal" id="gameMenuModal" hidden>
      <button
        type="button"
        class="menu-modal__overlay"
        id="menuOverlay"
        aria-label="Close menu"
      ></button>
      <section
        class="menu-modal__panel"
        role="dialog"
        aria-modal="true"
        aria-labelledby="menuTitle"
      >
        <header class="menu-modal__header">
          <h2 id="menuTitle">Game Menu</h2>
          <button type="button" class="hud__button" id="closeMenuBtn" aria-label="Close menu">
            Close
          </button>
        </header>
        <div class="menu-modal__content">
          <section>
            <h3>How to play</h3>
            <ul>
              <li>Swap orthogonally adjacent cards to make better sequence opportunities.</li>
              <li>
                Build a straight line (horizontal or vertical) of 3 to 7 cards in ascending or
                descending rank order.
              </li>
              <li>
                A valid sequence must stay in one suit, with at most one wildcard (Joker or an
                extra 2 acting as wildcard).
              </li>
              <li>
                When your selection is valid, double tap a selected card (or use the Clear button)
                to clear and score.
              </li>
            </ul>
          </section>
          <section>
            <h3>Scoring</h3>
            <p>
              Sequence score = sum of cleared card base values × combo multiplier (clean 7-card
              sequence doubles the result).
            </p>
            <p><strong>Any Card = 10 points</strong></p>
            <p>
              Combo chain: clearing again without making a move increases multiplier (x1, x2, x3…)
              and any move/swap/bomb action resets combo back to x1.
            </p>
          </section>
        </div>
      </section>
    </div>

    <script src="app.js"></script>
  </body>
</html>
